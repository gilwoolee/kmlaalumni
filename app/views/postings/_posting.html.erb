<div class='posting'>
  <div class='author'><%= posting.user.name %></div>
  <div class='date'><%= posting.created_at %></div>
  <div>
    <% if posting.content.length < 300 %>
      <div><%= posting.content %></div>
    <% else %>
      <div class="posting_preview">
        <%= posting.content[0, 299] %></br>
        ...
      </div>
      <div>
        <%= link_to "더 읽기", posting_url(posting), class: "read_more_link" %>
      </div>
      <div class="posting" style="display:none">
        <%= posting.content %>
      </div>
    <% end %>
  </div>
  <div>
      <%= form_for [posting, Comment.new] do |f| %>
        <%= f.text_area :content %>
        <div><%= f.submit '댓글 달기' %></div>
      <% end %>
  </div>
  <div id="<%= 'posting_' + posting.id.to_s() + '_comments'%>">
    <% if posting.comments.length > 3 %>
      <div id="<%= 'posting_' + posting.id.to_s() + '_get_more_comments_link'%>">
        <%= link_to "댓글 모두 보기", feed_comments_url(posting: posting.id), class: 'get_more_comments_link' %>
      </div>
    <% end %>
    
    <%= render posting.comments.order('created_at').limit(3) %>
  </div>
</div>
